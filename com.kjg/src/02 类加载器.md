# 类加载器的意义

![image](https://user-images.githubusercontent.com/48977889/149285835-161075af-93f4-448c-833b-5e5537b12e47.png)

将字节码文件（class文件）从文件系统（本地磁盘）或网络（比较少用）加载到 JVM运行时数据区的**方法区**内。**类加载器只负责加载类**，它不负责对象的生成、初始化。字节码被类加载器加载到方法区后，会在方法区生成对应的数据，这个数据被称为**元数据**，元数据与字节码文件一一对应，元数据可以理解为字节码在JVM里的实例。通过元数据可以在堆空间中实例化class对应的对象，**这多个对象也对应同一个元数据**。

![image](https://user-images.githubusercontent.com/48977889/149287816-a336982f-56d3-43b4-9d4a-955c3bd2084c.png)

# 类加载器的加载过程

![image](https://user-images.githubusercontent.com/48977889/149289819-fa7f172e-87a7-472a-ba7b-930012dc9ad0.png)

类加载器的工作流程大致分为：装载、链接、初始化

## 加载

1.获取class文件本身的二进制流。我们一般都是本地编译成class文件后获取。当然也有其他方式如网络IO获取等，比较少用。

2.将字节流中代表的类的逻辑结构 转换为方法区里的运行时数据结构，即元数据，可以理解为将文件声明的class转换为实际的class。

3.在内存中生成一个这个class元数据代表的class对象，就是getClass()获取的那个对象，它是class元数据的一个代表实例。

## 链接

链接又包含3部分

### 验证

验证class文件流的正确性，防止恶意注入。所有Java语言的class文件在二进制中都是以CA FE BA BE开头。

### 准备

为类变量（静态变量）分配内存、然后赋予0值。值得注意的是：**final修饰的static变量在编译期会就分配了值，在准备阶段会直接赋予值，而非0值**。因为准备阶段是针对class，所以实例变量在准备阶段是**不会初始化**的。

### 解析
